# –î–∞–Ω–Ω—ã–µ –∏ 
# üß† –®–∞–≥ 7: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–∞–π—Ç–∞ –∏ –¥–∞–Ω–Ω—ã–µ (`data.pug`, JSON)

---

## üîπ–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–∞–π—Ç–∞: `data/siteData.pug`
–û–±—ã—á–Ω–æ —Ç—ã –¥–µ–ª–∞–µ—à—å –æ–¥–∏–Ω —Ñ–∞–π–ª, –≥–¥–µ –∑–∞–¥–∞—é—Ç—Å—è –æ–±—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ.

### –ü—Ä–∏–º–µ—Ä:

```pug
//- data/siteData.pug
- var site = {
    title: '–î–æ—Å—Ç–∞–≤–∫–∞ –∏–∑ –ö–∏—Ç–∞—è',
    tagline: '–ù–∞–¥—ë–∂–Ω–æ, –∫–∞–∫ –∫–∏—Ç–∞–π—Å–∫–∞—è —Å—Ç–∞–ª—å',
    phone: '+7 900 000 00 00',
    year: 2025
  }
```

---

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ `default.pug`:

```pug
include ../data/siteData.pug
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```pug
title= site.title
p –¢–µ–ª–µ—Ñ–æ–Ω: #{site.phone}
```

---

## üîπ–î–∞–Ω–Ω—ã–µ –∏–∑ JSON-—Ñ–∞–π–ª–∞

### ‚ùó Pug —Å–∞–º –ø–æ —Å–µ–±–µ **–Ω–µ —É–º–µ–µ—Ç** —á–∏—Ç–∞—Ç—å `.json`, –Ω–æ –≤ Gulp —Ç—ã –º–æ–∂–µ—à—å —ç—Ç–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —á–µ—Ä–µ–∑ `require()`.

–ü—Ä–∏–º–µ—Ä —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º JSON (–µ—Å–ª–∏ –≤ `data/site.json`):

```js
// gulpfile.js ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, –∏—Å–ø–æ–ª—å–∑—É–µ—à—å pug plugin —Å locals
const site = require('./src/pug/data/site.json');

pug({
  locals: {
    site
  }
})
```

–ò —Ç–æ–≥–¥–∞ –≤ Pug-—Ñ–∞–π–ª–µ —Ç—ã –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å `site.title`, –∫–∞–∫ –æ–±—ã—á–Ω–æ.

---

### ‚úÖ –ü—Ä–∏–º–µ—Ä JSON-—Ñ–∞–π–ª–∞

```json
{
  "title": "–î–æ—Å—Ç–∞–≤–∫–∞ —Å Aliexpress",
  "tagline": "–ë–µ–∑ —Ä–∞—Å—Ç–∞–º–æ–∂–∫–∏ –Ω–µ –≤—ã—Å—ã–ª–∞–µ–º",
  "year": 2025
}
```

---

## üß™ –°–æ–≤–µ—Ç—ã –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ `data/`:

–¢—ã –º–æ–∂–µ—à—å —Ä–∞–∑–¥–µ–ª–∏—Ç—å:

```
data/
‚îú‚îÄ‚îÄ siteData.pug      # –ó–∞–≥–æ–ª–æ–≤–∫–∏, —Å–ª–æ–≥–∞–Ω, –∫–æ–Ω—Ç–∞–∫—Ç—ã
‚îú‚îÄ‚îÄ content.pug       # –¢–µ–∫—Å—Ç–æ–≤—ã–µ –±–ª–æ–∫–∏, –æ–ø–∏—Å–∞–Ω–∏–µ, –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
‚îú‚îÄ‚îÄ team.pug          # –£—á–∞—Å—Ç–Ω–∏–∫–∏ –∫–æ–º–∞–Ω–¥—ã (–º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤)
‚îú‚îÄ‚îÄ menu.pug          # –ú–µ–Ω—é –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
```

–ò –ø–æ—Ç–æ–º –ø–æ–¥–∫–ª—é—á–∞—Ç—å –∏—Ö –≤ –Ω—É–∂–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã ‚Äî —ç—Ç–æ –æ—á–µ–Ω—å —É–¥–æ–±–Ω–æ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.

---

–í–æ–ø—Ä–æ—Å—ã:
- "include ../data/siteData.pug" –ø–æ–¥–∫–ª—é—á–∞–µ–º –≤ default.pug –∏–ª–∏ base.pag
- "–≤ Gulp —Ç—ã –º–æ–∂–µ—à—å JSON –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —á–µ—Ä–µ–∑ `require()`" –º–æ–∂–µ—Ç —á–µ—Ä–µ–∑ import –ø–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º—É?
- —Ç—É—Ç pug({locals: { site }}), –∫–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –¥–≤–∞ —Ñ–∞–π–ª–∞ JSON?
- –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –∫–æ–¥ –≤ siteData.pug

–û—Ç–≤–µ—Ç—ã:
–û–æ–æ —Ç—ã –∑–∞—Ä—è–∂–µ–Ω, –∫–∞–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞ –∫–∏—Ç–∞–π—Å–∫–æ–º —Å–∫–ª–∞–¥–µ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π! üö¢
–†–∞–∑–±–µ—Ä—ë–º –≤—Å—ë –ø–æ –ø—É–Ω–∫—Ç–∞–º ‚Äî —É–≤–µ—Ä–µ–Ω–Ω–æ, —á—ë—Ç–∫–æ, –±–µ–∑ –ª–∞–ø—à–∏.

---

## ‚úÖ 1. –ì–¥–µ –ø–æ–¥–∫–ª—é—á–∞—Ç—å `include ../data/siteData.pug` ‚Äî –≤ `base.pug` –∏–ª–∏ `default.pug`?

üëâ **–õ—É—á—à–µ –≤ `default.pug`**, –ø–æ—Ç–æ–º—É —á—Ç–æ –∏–º–µ–Ω–Ω–æ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –∏ –º–æ–∂–µ—Ç —Ç—è–Ω—É—Ç—å **—Ä–∞–∑–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –º–∞–∫–µ—Ç–æ–≤**.

> –ï—Å–ª–∏ —Ç—ã –ø–æ–¥–∫–ª—é—á–∏—à—å `siteData` –≤ `base.pug`, –æ–Ω –±—É–¥–µ—Ç –≥—Ä—É–∑–∏—Ç—å—Å—è **–≤—Å–µ–≥–¥–∞ –∏ –≤–µ–∑–¥–µ**, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–µ–Ω.

üìå **–ò—Ç–æ–≥**:

* `base.pug` ‚Äî —Ç–æ–ª—å–∫–æ HTML-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞: `html`, `head`, `body`, `block content`
* `default.pug` ‚Äî —É–∂–µ —á—Ç–æ-—Ç–æ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç: –¥–∞–Ω–Ω—ã–µ, head, header, footer –∏ —Ç.–¥.

---

## ‚úÖ 2. –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `import` –≤–º–µ—Å—Ç–æ `require()` –≤ Gulp?

üëé –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, **–Ω–µ—Ç –Ω–∞–ø—Ä—è–º—É—é**, –ø–æ—Ç–æ–º—É —á—Ç–æ `import` —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ `type: "module"` –∏–ª–∏ —á–µ—Ä–µ–∑ Babel/ESM-—Å–±–æ—Ä–∫–∏.

üëç –ê –≤–æ—Ç `require()` —Ä–∞–±–æ—Ç–∞–µ—Ç **—Å—Ä–∞–∑—É** –≤ `gulpfile.js` (–µ—Å–ª–∏ —Ç—ã –Ω–µ –Ω–∞ ESM).
–¢–∞–∫ —á—Ç–æ –æ—Å—Ç–∞—ë–º—Å—è –ø–æ–∫–∞ –Ω–∞ `require()`:

```js
const site = require('./src/pug/data/site.json');
const content = require('./src/pug/data/content.json');
```

---

## ‚úÖ 3. –ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –¥–≤–∞ —Ñ–∞–π–ª–∞ JSON?

–õ–µ–≥–∫–æ!

```js
const site = require('./src/pug/data/site.json');
const content = require('./src/pug/data/content.json');

pug({
  locals: {
    site,
    content
  }
})
```

–¢–µ–ø–µ—Ä—å –≤ –ª—é–±–æ–º `.pug` —Ç—ã –º–æ–∂–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

```pug
title= site.title
p= content.heroText
```

---

## ‚úÖ 4. –ö–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç `siteData.pug` (–µ—Å–ª–∏ –±–µ–∑ JSON)

```pug
//- siteData.pug
- var site = {
    title: '–î–æ—Å—Ç–∞–≤–∫–∞ –∏–∑ –ö–∏—Ç–∞—è',
    tagline: '–ë—ã—Å—Ç—Ä–æ. –î—ë—à–µ–≤–æ. –ì–∞—Ä–∞–Ω—Ç–∏—è.',
    phone: '+7 900 000 00 00',
    email: 'info@kitay.ru',
    year: 2025
  }
```

> üìå –ü–æ–¥–∫–ª—é—á–∞–µ—à—å –≤ `default.pug`:

```pug
include ../data/siteData.pug
```

–ò –¥–∞–ª—å—à–µ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å:

```pug
title= site.title
h1= site.tagline
p –°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏: #{site.phone}
```

---

## ‚ö†Ô∏è –ö—Ä–∞—Ç–∫–∏–π –∏—Ç–æ–≥:

| –ß—Ç–æ                         | –ì–¥–µ                                                       |
| --------------------------- | --------------------------------------------------------- |
| `siteData.pug`              | –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –≤ `default.pug`                              |
| JSON                        | –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –≤ `gulpfile.js` —á–µ—Ä–µ–∑ `require()`            |
| `locals: { site, content }` | –î–∞—ë—Ç —Ç–µ–±–µ –¥–æ—Å—Ç—É–ø –∫ `site.title` –∏ —Ç.–¥.                    |
| `import`                    | –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–∞ `type: "module"` –∏–ª–∏ ESM ‚Äî –¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö |

–í–æ–ø—Ä–æ—Å—ã:
- –£ –º–µ–Ω—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π Gulp –≥–¥–µ –≤ package.json —Å—Ç–æ–∏—Ç type: module

–°–µ–π—á–∞—Å —É —Ç–µ–±—è Pug –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ `locals`, –ø–æ—ç—Ç–æ–º—É –æ–Ω –Ω–µ –≤–∏–¥–∏—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `site.json` –∏–ª–∏ `siteData.pug`.

---

## üîß –î–∞–≤–∞–π —É–ª—É—á—à–∏–º —Ç–≤–æ–π `compilePug`, —á—Ç–æ–±—ã –æ–Ω:

* –ó–∞–≥—Ä—É–∂–∞–ª JSON-–¥–∞–Ω–Ω—ã–µ –∏–∑ `data/`
* –ü–µ—Ä–µ–¥–∞–≤–∞–ª –∏—Ö –∫–∞–∫ `locals` –≤ `.pug`
* –†–∞–±–æ—Ç–∞–ª —Å `import`, –ø–æ—Ç–æ–º—É —á—Ç–æ —É —Ç–µ–±—è `type: module`

---

## ‚úÖ –ù–æ–≤—ã–π `compilePug` —Å –∏–º–ø–æ—Ä—Ç–æ–º JSON:

```js
// ‚úÖ –í–≤–µ—Ä—Ö —Ñ–∞–π–ª–∞:
import fs from 'fs/promises';

// üß± compilePug c –¥–∞–Ω–Ω—ã–º–∏
export async function compilePug() {
  // –ó–∞–≥—Ä—É–∂–∞–µ–º JSON-—Ñ–∞–π–ª—ã
  const site = JSON.parse(await fs.readFile('./src/pug/data/site.json', 'utf-8'));
  const content = JSON.parse(await fs.readFile('./src/pug/data/content.json', 'utf-8'));

  return src(paths.pug.pages)
    .pipe(plumber())
    .pipe(pug({
      pretty: !isProd,
      locals: {
        site,
        content
      }
    }))
    .pipe(dest(paths.pug.dest))
    .pipe(browserSync.stream());
}
```

---

## ‚úÖ –¢–µ–ø–µ—Ä—å –≤ –ª—é–±–æ–º `.pug` –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å:

```pug
h1= site.title
p= site.tagline
h2= content.heroTitle
p= content.heroText
```

---

## üí° –£–±–µ–¥–∏—Å—å, —á—Ç–æ —É —Ç–µ–±—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–∫–∞—è:

```
src/
‚îî‚îÄ‚îÄ pug/
    ‚îú‚îÄ‚îÄ data/
    ‚îÇ   ‚îú‚îÄ‚îÄ site.json
    ‚îÇ   ‚îî‚îÄ‚îÄ content.json
    ‚îú‚îÄ‚îÄ pages/
    ‚îÇ   ‚îî‚îÄ‚îÄ index.pug
    ‚îî‚îÄ‚îÄ main.pug
```

---

## üî• –ë–æ–Ω—É—Å: –∫–∞–∫ –¥–µ–ª–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –∑–∞–≥—Ä—É–∑–∫—É –≤—Å–µ—Ö JSON-—Ñ–∞–π–ª–æ–≤ (–µ—Å–ª–∏ —Ñ–∞–π–ª–æ–≤ –º–Ω–æ–≥–æ)

```js
import fs from 'fs/promises';
import path from 'path';

const loadData = async () => {
  const dataDir = './src/pug/data';
  const files = await fs.readdir(dataDir);
  const result = {};

  for (const file of files) {
    if (file.endsWith('.json')) {
      const key = path.basename(file, '.json'); // site, content –∏ —Ç.–¥.
      const content = await fs.readFile(path.join(dataDir, file), 'utf-8');
      result[key] = JSON.parse(content);
    }
  }

  return result;
};

export async function compilePug() {
  const locals = await loadData();

  return src(paths.pug.pages)
    .pipe(plumber())
    .pipe(pug({ pretty: !isProd, locals }))
    .pipe(dest(paths.pug.dest))
    .pipe(browserSync.stream());
}
```

–¢–µ–ø–µ—Ä—å –º–æ–∂–µ—à—å –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–ª—è—Ç—å JSON-—Ñ–∞–π–ª—ã ‚Äî –æ–Ω–∏ –≤—Å–µ —Å–∞–º–∏ –ø–æ–¥–∫–ª—é—á–∞—Ç—Å—è –∫–∞–∫ `site`, `content`, `team` –∏ —Ç.–¥.

---

–°–∫–∞–∂–∏, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å —Ç–∞–∫—É—é –∂–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é, –Ω–æ –¥–ª—è `.pug`-–¥–∞–Ω–Ω—ã—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä: `data/siteData.pug` –∏–ª–∏ –º–∞—Å—Å–∏–≤–æ–≤ —á–µ—Ä–µ–∑ `- var` ‚Äî —Ç–æ–∂–µ —Å–¥–µ–ª–∞–µ–º!
